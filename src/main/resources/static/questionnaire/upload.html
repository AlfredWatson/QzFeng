<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>体检单上传</title>
</head>
<body>
<!-- 导航栏 -->
<nav>
    <a href="/static/home.html">回到主页</a> |
    <a href="/static/user-info.html">填写基本信息</a> |
    <a href="/static/user-health.html">填写健康信息</a>
</nav>

<h2>三、体检单上传</h2>
<form id="uploadForm">
    <p>3.1 提交体检报告（血常规、尿液分析、血糖检查、血脂检查部分）</p>
    <input type="file" id="file" accept="image/*" capture="camera" required><br><br>
    <button type="submit">上传图片</button>
</form>

<script>
    const token = localStorage.getItem('token');

    document.getElementById('uploadForm').addEventListener('submit', function (e) {
        e.preventDefault();
        const fileInput = document.getElementById('file');
        const file = fileInput.files[0];

        const formData = new FormData();
        formData.append('file', file);

        fetch('/user/uploads', {
            method: 'POST',
            headers: {
                'Authorization': token
            },
            body: formData
        })
            .then(res => res.json())
            .then(() => alert("上传成功"))
            .catch(err => console.error(err));
    });
</script>
</body>
</html>